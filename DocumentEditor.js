(globalThis.webpackChunkjson_schema_pouchdb_app=globalThis.webpackChunkjson_schema_pouchdb_app||[]).push([[359],{63623:(t,e,a)=>{"use strict";a.r(e),a.d(e,{DocumentEditor:()=>p,default:()=>b});var n=a(67294),s=a(16550),c=a(73727),o=a(22318),r=a(282),i=a(89659),m=a(17233),d=a(97146),l=a(29958),u=a(47398);function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}class p extends n.Component{constructor(...t){super(...t),h(this,"state",{loaded:!1}),h(this,"onChange",(({formData:t})=>{this.setState({data:{...this.state.data,...t}})})),h(this,"onSubmit",(async({formData:t})=>{try{const e=await this.props.db.saveDocument(this.getSchemaId(),this.getDocumentId(),t);this.setState({data:e}),this.props.enqueueSnackbar("Document saved.",{variant:"success"})}catch(t){console.error(t)}}))}getSchemaId(){const{schema:t}=this.props.match.params;return t}getDocumentId(){const{document:t}=this.props.match.params;return t}async componentDidMount(){try{const t=this.getSchemaId(),e=this.getDocumentId(),a=await this.props.db.getSchema(t),n=await this.props.db.getDocument(t,e);this.setState({loaded:!0,schema:a,data:n})}catch(t){return void console.error(t)}}render(){const{loaded:t,schema:e,data:a}=this.state;return t?n.createElement(n.Fragment,null,n.createElement(l.Z,{title:e.title}),n.createElement(o.Z,{variant:"h3",component:"h1"},e.title),n.createElement("p",null,n.createElement(i.Z,{component:c.rU,to:`/document/${e.id}`,"data-testid":"return-to-document-list"},"Return to Document List")),n.createElement(m.ZP,{schema:e.schema,formData:a,onChange:this.onChange,onSubmit:this.onSubmit,"data-testid":"document-form"},n.createElement(r.Z,{type:"submit",variant:"contained",color:"primary","data-testid":"document-save-button"},"Save")),n.createElement(u.Z,null),n.createElement("div",null,n.createElement("div",null,"Created: ",a.created),n.createElement("div",null,"Last Updated: ",a.lastUpdated)),n.createElement(u.Z,null)):n.createElement("div",null)}}const b=(0,s.EN)((0,d.RM)(p))}}]);
//# sourceMappingURL=DocumentEditor.js.map